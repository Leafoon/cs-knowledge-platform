---
title: "操作系统核心概念"
description: "深入理解操作系统的基本原理与核心机制"
updated: "2026-01-21"
---

# 操作系统概述

操作系统（Operating System, OS）是管理计算机硬件与软件资源的系统软件，是用户与计算机硬件之间的接口。

## 1.1 什么是操作系统

操作系统是一个控制程序，用于：

- **管理硬件资源**：CPU、内存、I/O设备等
- **提供用户界面**：命令行或图形界面
- **运行应用程序**：为应用提供执行环境
- **文件管理**：组织和存储数据

现代操作系统的核心目标是**高效性**（Efficiency）和**便利性**（Convenience）。

## 1.2 操作系统的功能

### 进程管理

进程是操作系统进行资源分配和调度的基本单位。主要功能包括：

- 进程创建与终止
- 进程调度
- 进程同步与通信
- 死锁处理

### 内存管理

内存管理负责内存的分配、回收和保护：

```c
// 内存分配示例
void* ptr = malloc(1024); // 分配1KB内存
if (ptr == NULL) {
    printf("内存分配失败\\n");
}
free(ptr); // 释放内存
```

主要技术：
- 虚拟内存（Virtual Memory）
- 分页（Paging）
- 分段（Segmentation）

### 文件系统

文件系统组织和管理存储设备上的数据：

1. **文件组织**：目录树结构
2. **文件访问控制**：权限管理
3. **磁盘空间管理**：空闲块管理

## 1.3 操作系统的类型

| 类型 | 特点 | 示例 |
|------|------|------|
| 批处理系统 | 无交互，批量处理作业 | IBM OS/360 |
| 分时系统 | 多用户，时间片轮转 | UNIX |
| 实时系统 | 严格时间限制 | VxWorks |
| 分布式系统 | 多台计算机协同 | Google FS |

---

# 进程与线程

进程和线程是操作系统中程序执行的基本单元。

## 2.1 进程的概念

进程是**正在运行的程序实例**，包含：

- **代码段（Text）**：程序指令
- **数据段（Data）**：全局变量
- **堆（Heap）**：动态分配的内存
- **栈（Stack）**：函数调用和局部变量

### 进程状态转换

进程在生命周期中会经历多种状态：

```
新建 (New) → 就绪 (Ready) → 运行 (Running) → 终止 (Terminated)
                  ↑             ↓
                  └── 等待 (Waiting)
```

- **就绪**：等待CPU分配
- **运行**：正在执行
- **等待**：等待I/O或事件

## 2.2 线程模型

线程是**轻量级进程**，同一进程内的线程共享：

- 地址空间
- 全局变量
- 打开的文件

但每个线程有独立的：
- 程序计数器（PC）
- 寄存器
- 栈空间

### 多线程编程示例

```python
import threading

def worker(name):
    print(f"线程 {name} 正在运行")

threads = []
for i in range(5):
    t = threading.Thread(target=worker, args=(i,))
    threads.append(t)
    t.start()

for t in threads:
    t.join()

print("所有线程已完成")
```

## 2.3 进程调度算法

操作系统使用不同的调度算法来决定哪个进程获得CPU：

### 先来先服务（FCFS）

- **优点**：简单公平
- **缺点**：短作业可能等待很久

### 最短作业优先（SJF）

- **优点**：平均等待时间最短
- **缺点**：可能导致饥饿

### 时间片轮转（RR）

```
进程队列: P1 → P2 → P3 → P1 → P2 → ...
时间片: 10ms
```

适合分时系统，保证响应性。

---

# 内存管理

内存管理是操作系统的核心功能之一。

## 3.1 虚拟内存

虚拟内存允许程序使用比物理内存更大的地址空间。

### 分页机制

将虚拟地址空间和物理内存分为固定大小的页（Page）：

- **页大小**：通常4KB或8KB
- **页表**：虚拟页号到物理页框号的映射

虚拟地址结构：

```
| 页号 (Page Number) | 页内偏移 (Offset) |
```

### 页面置换算法

当物理内存不足时，需要选择页面换出：

1. **FIFO**：先进先出
2. **LRU**：最近最少使用
3. **Clock**：时钟算法（近似LRU）

## 3.2 内存分配策略

### 连续分配

- **首次适应（First Fit）**：第一个足够大的空闲块
- **最佳适应（Best Fit）**：最小的足够大的空闲块
- **最坏适应（Worst Fit）**：最大的空闲块

### 伙伴系统

将内存按2的幂次方划分：

```
1024KB
├── 512KB
│   ├── 256KB
│   └── 256KB (allocated)
└── 512KB (allocated)
```

---

## 参考资料

- [Operating System Concepts](https://www.os-book.com/) - Silberschatz等著
- [Modern Operating Systems](https://www.pearson.com/) - Tanenbaum著
- [OSTEP](https://pages.cs.wisc.edu/~remzi/OSTEP/) - 免费在线教材

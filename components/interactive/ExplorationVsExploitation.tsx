"use client";

import { useState } from "react";

export function ExplorationVsExploitation() {
    const [step, setStep] = useState(0);
    const maxSteps = 10;
    const epsilon = 0.2;

    const exploit = Math.random() > epsilon;

    return (
        <div className="w-full max-w-6xl mx-auto p-6 bg-gradient-to-br from-pink-50 to-rose-50 dark:from-slate-900 dark:to-pink-950 rounded-2xl shadow-xl">
            <div className="text-center mb-6">
                <h3 className="text-2xl font-bold text-slate-800 dark:text-slate-100 mb-2">
                    探索 vs 利用
                </h3>
            </div>

            <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <div className="bg-white dark:bg-slate-800 rounded-xl p-6 shadow-lg">
                    <h4 className="text-xl font-bold text-blue-600 mb-4">利用（Exploitation）</h4>
                    <div className="space-y-3 text-sm">
                        <div className="p-3 bg-blue-50 dark:bg-blue-900/20 rounded">
                            <strong>策略:</strong> 选择当前最优动作
                        </div>
                        <div className="p-3 bg-blue-50 dark:bg-blue-900/20 rounded">
                            <strong>目标:</strong> 最大化即时奖励
                        </div>
                        <div className="p-3 bg-green-50 dark:bg-green-900/20 rounded">
                            <strong>✅ 优势:</strong> 获得已知最优奖励
                        </div>
                        <div className="p-3 bg-red-50 dark:bg-red-900/20 rounded">
                            <strong>❌ 风险:</strong> 可能陷入局部最优
                        </div>
                    </div>
                </div>

                <div className="bg-white dark:bg-slate-800 rounded-xl p-6 shadow-lg border-4 border-pink-500">
                    <h4 className="text-xl font-bold text-pink-600 mb-4">探索（Exploration）</h4>
                    <div className="space-y-3 text-sm">
                        <div className="p-3 bg-pink-50 dark:bg-pink-900/20 rounded">
                            <strong>策略:</strong> 尝试新动作
                        </div>
                        <div className="p-3 bg-pink-50 dark:bg-pink-900/20 rounded">
                            <strong>目标:</strong> 获取信息
                        </div>
                        <div className="p-3 bg-green-50 dark:bg-green-900/20 rounded">
                            <strong>✅ 优势:</strong> 可能发现更优解
                        </div>
                        <div className="p-3 bg-red-50 dark:bg-red-900/20 rounded">
                            <strong>❌ 风险:</strong> 短期奖励损失
                        </div>
                    </div>
                </div>
            </div>

            <div className="bg-white dark:bg-slate-800 rounded-xl p-6 shadow-lg mb-6">
                <h4 className="text-lg font-bold mb-4">ε-greedy 策略</h4>
                <div className="font-mono text-center p-4 bg-slate-50 dark:bg-slate-700 rounded mb-4">
                    概率 {(1 - epsilon) * 100}%: 利用 (最优动作)<br />
                    概率 {epsilon * 100}%: 探索 (随机动作)
                </div>
                <div className="h-16 bg-slate-100 dark:bg-slate-700 rounded overflow-hidden flex">
                    <div className="bg-blue-500 flex items-center justify-center text-white font-bold" style={{ width: `${(1 - epsilon) * 100}%` }}>
                        利用 {((1 - epsilon) * 100).toFixed(0)}%
                    </div>
                    <div className="bg-pink-500 flex items-center justify-center text-white font-bold" style={{ width: `${epsilon * 100}%` }}>
                        探索 {(epsilon * 100).toFixed(0)}%
                    </div>
                </div>
            </div>

            <div className="bg-white dark:bg-slate-800 rounded-xl p-6 shadow-lg">
                <h4 className="text-lg font-bold mb-4">困境示例：Multi-Armed Bandit</h4>
                <div className="space-y-3 text-sm">
                    <div className="p-4 bg-slate-50 dark:bg-slate-700 rounded">
                        <strong>问题:</strong> 3个老虎机，平均奖励分别为 [0.5, 0.8, 0.6]（未知）
                    </div>
                    <div className="p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded">
                        <strong>纯利用:</strong> 可能一直选 arm 1（第一个尝试的），错过更优的 arm 2
                    </div>
                    <div className="p-4 bg-cyan-50 dark:bg-cyan-900/20 rounded">
                        <strong>纯探索:</strong> 一直随机选择，无法充分利用已知最优
                    </div>
                    <div className="p-4 bg-green-50 dark:bg-green-900/20 rounded border-2 border-green-500">
                        <strong>平衡:</strong> 早期多探索，后期多利用
                    </div>
                </div>
            </div>
        </div>
    );
}
